<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Impostor Clash Royale</title>
<style>
  body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
    background: #0f172a;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .card {
    background: #020617;
    border-radius: 16px;
    padding: 20px;
    width: 90%;
    max-width: 400px;
    text-align: center;
    box-shadow: 0 0 30px rgba(0,0,0,.6);
    position: relative;
  }
  h1, h2 { margin-bottom: 16px; }
  input, select, button {
    width: 100%;
    padding: 12px;
    margin: 6px 0;
    border-radius: 8px;
    border: none;
    font-size: 16px;
  }
  button {
    background: #2563eb;
    color: white;
    font-weight: bold;
    cursor: pointer;
  }
  button:active { transform: scale(.98); }
  .hidden { display: none; }
  .reveal {
    margin-top: 20px;
    background: #1e293b;
    padding: 30px;
    border-radius: 12px;
    font-size: 22px;
  }
  .hint { font-size: 14px; opacity: .7; margin-top: 10px; }
  /* estilo do ícone de info */
  .info-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    font-weight: bold;
    background: #2563eb;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    text-align: center;
    line-height: 24px;
    cursor: pointer;
  }
  .info-popup {
    position: absolute;
    top: 40px;
    right: 10px;
    background: #1e293b;
    padding: 15px;
    border-radius: 12px;
    font-size: 14px;
    width: 250px;
    z-index: 10;
  }
</style>
</head>
<body>

<!-- Tela de setup -->
<div class="card" id="setup">
  <div class="info-icon" onclick="toggleInfo()">i</div>
  <div class="info-popup hidden" id="infoPopup">
    <strong>Como Jogar - Impostor Clash Royale</strong><br>
    1. Escolha o número de jogadores e digite os nomes.<br>
    2. Clique em <strong>Iniciar</strong> para começar.<br>
    3. Cada jogador verá secretamente sua carta (ou será o <strong>IMPOSTOR</strong>).<br>
    4. Arraste a tela para cima para revelar sua carta.<br>
    5. Depois que todos conferirem suas cartas, a tela mostrará quem começa.<br>
    6. Clique em <strong>Revelar Impostor</strong> para descobrir quem era o impostor.<br>
    7. Volte ao menu para jogar novamente.<br>
    <em>Objetivo: se você for o IMPOSTOR, tente se infiltrar e enganar; se for um inocente, identifique o impostor.</em>
  </div>
  <h1>Impostor Clash</h1>
  <label>Número de jogadores</label>
  <select id="playerCount">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
  </select>
  <div id="names"></div>
  <button onclick="startGame()">Iniciar</button>
</div>

<!-- Tela do jogo -->
<div class="card hidden" id="game">
  <h2 id="playerName"></h2>
  <div class="reveal hidden" id="cardReveal"></div>
  <div class="hint">Arraste pra cima para revelar a carta</div>
  <button id="nextBtn" onclick="nextPlayer()">Próximo</button>
</div>

<!-- Tela de início da partida + revelação do impostor -->
<div class="card hidden" id="startScreen">
  <h2 id="starterText"></h2>
  <button id="revealBtn" onclick="revealImpostor()">Revelar Impostor</button>
  <div class="reveal hidden" id="impostorReveal"></div>
</div>

<script>
const clashCards = [
  "Arqueiras","Bárbaros","Gigante","Mini P.E.K.K.A","Mosqueteira","Flechas","Bola de Fogo","Valquíria","Príncipe","Bebê Dragão",
  "Exército de Esqueletos","Bruxa","Mago","Mago Elétrico","Golem","Corredor","Canhão","Torre Inferno","Dragão Infernal",
  "Mega Cavaleiro","P.E.K.K.A","Balão","Mineiro","Lava Hound","Três Mosqueteiras","Lenhador","Executor","Bandida","Fantasma Real",
  "Pescador","Caçador","Arqueiro Mágico","Gigante Elétrico","Cavaleiro Dourado","Rainha Arqueira","Rei Esqueleto",
  "Espírito de Gelo","Espírito de Fogo","Espírito Elétrico","Espírito de Cura","Zap","Relâmpago","Veneno","Tornado",
  "Fúria","Espelho","Clone","Barril de Goblins","Gangue de Goblins","Goblins","Goblins Lanceiros","Servos","Horda de Servos",
  "Cemitério","Máquina Voadora","Cavaleiro","Aríete de Batalha","Carrinho de Canhão","Morteiro","X-Besta","Foguete","Tronco",
  "Vinhas","Mago de Gelo","Eletrocutadores","Golem de Gelo","Mineiro Bombado","Barril de Esqueletos","Cabana de Goblins","Lápide",
  "Bombardeiro","Bandida Líder","Máquina Goblin","Morcegos","Princesa","Goblinstein","Coletor de Elixir","Gigante Real","Tesla",
  "Príncipe das Trevas","Jaula de Goblin","Golem de Elixir","Pequeno Príncipe","Bruxa Sombria","Bruxa Mãe","Domadora de Carneiro",
  "Torre de Bombas","Destruidores de Muro","Goblin Gigante","Bárbaros de Elite","Dragão Elétrico","Curadora Guerreira",
  "Esqueleto Gigante","Dragões Esqueletos","Mega Servo","Barril de Bárbaro","Sparky","Goblin com Dardo","Gelo","Recrutas Reais",
  "Encomenda Real","Porcos Reais","Monge","Fênix","Cabana de Bárbaros","Fornalha","Bola de Neve","Lançador","Maldição Goblin",
  "Guardas","Escavadeira de Goblins","Goblin Demolidor","Imperatriz Espiritual","Patifes","Gigante das Runas","Pirotécnica",
  "Terremoto","Berseker","Arbusto Traiçoeiro","Vácuo"
];

let players = [], roles = [], index = 0, starterIndex = 0;

const namesDiv = document.getElementById('names');
const setupDiv = document.getElementById('setup');
const gameDiv = document.getElementById('game');
const startScreen = document.getElementById('startScreen');
const playerName = document.getElementById('playerName');
const cardReveal = document.getElementById('cardReveal');
const nextBtn = document.getElementById('nextBtn');
const starterText = document.getElementById('starterText');
const revealBtn = document.getElementById('revealBtn');
const impostorReveal = document.getElementById('impostorReveal');
const infoPopup = document.getElementById('infoPopup');

/* cria inputs de nome */
document.getElementById('playerCount').addEventListener('change', e => {
  namesDiv.innerHTML = '';
  for(let i = 0; i < e.target.value; i++){
    const input = document.createElement('input');
    input.placeholder = `Nome do jogador ${i+1}`;
    namesDiv.appendChild(input);
  }
});
document.getElementById('playerCount').dispatchEvent(new Event('change'));

/* toggle popup info */
function toggleInfo(){
  infoPopup.classList.toggle('hidden');
}

/* inicia jogo */
function startGame(){
  players = [...namesDiv.querySelectorAll('input')].map(i => i.value.trim() || 'Jogador');
  const card = clashCards[Math.floor(Math.random() * clashCards.length)];
  roles = players.map(() => card);
  if(players.length > 1) roles[Math.floor(Math.random() * players.length)] = 'IMPOSTOR';
  starterIndex = Math.floor(Math.random() * players.length);
  index = 0;
  setupDiv.classList.add('hidden');
  gameDiv.classList.remove('hidden');
  nextBtn.style.display = 'inline-block';
  impostorReveal.classList.add('hidden');
  revealBtn.classList.remove('hidden');
  showPlayer();
}

/* mostra jogador atual */
function showPlayer(){
  playerName.innerText = players[index];
  cardReveal.innerText = roles[index];
  cardReveal.classList.add('hidden');
}

/* próximo jogador */
function nextPlayer(){
  index++;
  if(index >= players.length){
    gameDiv.classList.add('hidden');
    starterText.innerText = `${players[starterIndex]} começa!`;
    startScreen.classList.remove('hidden');
    impostorReveal.classList.add('hidden');
    revealBtn.classList.remove('hidden');
    return;
  }
  showPlayer();
}

/* revela impostor */
function revealImpostor(){
  const impostorIndex = roles.indexOf('IMPOSTOR');
  if(impostorIndex !== -1){
    starterText.classList.add('hidden');
    revealBtn.classList.add('hidden');
    impostorReveal.innerHTML = `<strong>O impostor era: ${players[impostorIndex]}</strong><br><br>
      <button onclick="resetGame()">Voltar ao menu</button>`;
    impostorReveal.classList.remove('hidden');
  }
}

/* reset */
function resetGame(){
  index = 0;
  starterIndex = 0;
  roles = [];
  cardReveal.innerText = '';
  cardReveal.classList.add('hidden');
  impostorReveal.innerHTML = '';
  impostorReveal.classList.add('hidden');
  starterText.classList.remove('hidden');
  revealBtn.classList.remove('hidden');
  startScreen.classList.add('hidden');
  gameDiv.classList.add('hidden');
  setupDiv.classList.remove('hidden');
}

/* swipe pra revelar carta */
let startY = 0;
gameDiv.addEventListener('touchstart', e => { startY = e.touches[0].clientY; });
gameDiv.addEventListener('touchend', e => {
  const endY = e.changedTouches[0].clientY;
  if(startY - endY > 50){ cardReveal.classList.remove('hidden'); }
});
</script>
</body>
</html>
